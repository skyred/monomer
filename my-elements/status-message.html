<link rel="import" href="polymer/polymer.html">
<!--
 /**
  * @file
  * Polymer element for status message.
  *
  * Properties:
  * - customType: [String] type of message ('error', 'warning', ...).
  * - messages: [Array] each containing:
  *   - [String]
  * - heading: [String]
  */
-->
<dom-module id="status-message">

<template>
    <style>
      :host {
          background: no-repeat 10px 17px;  /* LTR */
          border: 1px solid;
          border-width: 1px 1px 1px 0;  /* LTR */
          border-radius: 2px;
          padding: 15px 20px 15px 35px; /* LTR */
          word-wrap: break-word;
          overflow-wrap: break-word;
          display: block;
      }
      [dir="rtl"] :host {
        border-width: 1px 0 1px 1px;
        background-position: right 10px top 17px;
        padding-left: 20px;
        padding-right: 35px;
        text-align: right;
        display: block;
      }
        .messages + .messages {
            margin-top: 1.538em;
        }
        .messages__list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .messages__item + .messages__item {
            margin-top: 0.769em;
        }
        /* See .color-success in Seven's colors.css */
        .messages--status {
            color: #325e1c;
            background-color: #f3faef;
            border-color: #c9e1bd #c9e1bd #c9e1bd transparent;  /* LTR */
            background-image: url(../../../../misc/icons/73b355/check.svg);
            box-shadow: -8px 0 0 #77b259; /* LTR */
        }
        [dir="rtl"] .messages--status {
            border-color: #c9e1bd transparent #c9e1bd #c9e1bd;
            box-shadow: 8px 0 0 #77b259;
            margin-left: 0;
        }
        /* See .color-warning in Seven's colors.css */
        .messages--warning {
            background-color: #fdf8ed;
            background-image: url(../../../../misc/icons/e29700/warning.svg);
            border-color: #f4daa6 #f4daa6 #f4daa6 transparent;  /* LTR */
            color: #734c00;
            box-shadow: -8px 0 0 #e09600; /* LTR */
        }
        [dir="rtl"] .messages--warning {
            border-color: #f4daa6 transparent #f4daa6 #f4daa6;
            box-shadow: 8px 0 0 #e09600;
        }
        /* See .color-error in Seven's colors.css */
        .messages--error {
            background-color: #fcf4f2;
            color: #a51b00;
            background-image: url(../../../../misc/icons/e32700/error.svg);
            border-color: #f9c9bf #f9c9bf #f9c9bf transparent;  /* LTR */
            box-shadow: -8px 0 0 #e62600; /* LTR */
        }
        [dir="rtl"] .messages--error {
            border-color: #f9c9bf transparent #f9c9bf #f9c9bf;
            box-shadow: 8px 0 0 #e62600;
        }
        .messages--error p.error {
            color: #a51b00;
        }

    </style>

  <!-- alert -->
  <template is="dom-if" if="{{isError(type)}}">
    <div role="contentinfo" class$="{{ calculateClass() }}">
      <div role="alert">
        <template is="dom-if" if="{{heading}}">
        <h2 class="visually-hidden">{{ heading }}</h2>
        </template>
        <ul class="messages__list">
          <template is="dom-repeat" items="{{messages}}">
            <li class="messages__item">{{ item }}</li>
          </template>
        </ul>
      </div>
    </div>
  </template>

  <!-- Non-alert -->
  <template is="dom-if" if="{{!isError(type)}}">
    <div role="contentinfo" class$="{{ calculateClass() }}">
        <template is="dom-if" if="{{heading}}">
          <h2 class="visually-hidden">{{ heading }}</h2>
        </template>
        <ul class="messages__list">
          <template is="dom-repeat" items="{{messages}}">
            <li class="messages__item">{{ item }}</li>
          </template>
        </ul>
    </div>
  </template>

</template>

  <script>
    Polymer({
      is: 'status-message',
      properties: {
        customType: String,
        messages: Array,
        heading: String,
      },
      isError: function(type) {
        return type == 'error';
      },
      calculateClass: function() {
        return 'messages' + '--' + this.type;
      }
    });
  </script>

</dom-module>